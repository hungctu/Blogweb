<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>ZenBlog Bootstrap Template - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500&family=Inter:wght@400;500&family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Template Main CSS Files -->
  <link href="assets/css/variables.css" rel="stylesheet">
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: ZenBlog - v1.3.0
  * Template URL: https://bootstrapmade.com/zenblog-bootstrap-blog-template/
  * Author: BootstrapMade.com
  * License: https:///bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a th:href="@{/index}" class="logo d-flex align-items-center">
        <!-- Uncomment the line below if you also wish to use an image logo -->
        <!-- <img src="assets/img/logo.png" alt=""> -->
        <h1>ZenBlog</h1>
      </a>

      <nav id="navbar" class="navbar">
        <ul>
            <li><a th:href="@{/index}">Trang chủ</a></li>
            <li><a th:href="@{/danhsachcd}">Chủ đề</a></li>
            <li><a th:href="@{/danhsachtl}">Thể loại</a></li>
			<li class="dropdown"><a th:href="@{/ttnguoidung(userid=${nguoidung.ID_NGUOI_DUNG},username=${nguoidung.TEN_DANG_NHAP})}">
                <img th:src="@{'photo/' +${nguoidung.Hinh_ND}}" alt="" style="height: 30px;width: 30px" class="rounded-circle"></a>
				<ul>
					<li><a th:href="@{/ttnguoidung(userid=${nguoidung.ID_NGUOI_DUNG},username=${nguoidung.TEN_DANG_NHAP})}">Thông tin người dùng</a></li>
					<li><a th:href="@{/dsdausach(userid=${nguoidung.ID_NGUOI_DUNG},username=${nguoidung.TEN_DANG_NHAP})}">Danh sách đầu sách</a></li>
					<li>
                        <a href="javascript: document.logoutform.submit()">Đăng xuất</a>
                        <form name="logoutform" th:action="@{/logout}" method="post" th:hiden="true">
                            <input hidden type="submit" value="Đăng xuất">
                        </form>
                    </li>
				</ul>
			</li>

        </ul>
      </nav><!-- .navbar -->

      <div class="position-relative">
        <a href="#" class="mx-2"><span class="bi-facebook"></span></a>
        <a href="#" class="mx-2"><span class="bi-twitter"></span></a>
        <a href="#" class="mx-2"><span class="bi-instagram"></span></a>

        <a href="#" class="mx-2 js-search-open"><span class="bi-search"></span></a>
        <i class="bi bi-list mobile-nav-toggle"></i>

        <!-- ======= Search Form ======= -->
        <div class="search-form-wrap js-search-form-wrap">
            <form th:action="@{/timkiem}" method="get" class="search-form">
                <button style="border:none;background-color:white" type="submit" class="icon bi-search"></button>
                <input type="text" name="timkiem" placeholder="Search" class="form-control">
                <button class="btn js-search-close" type="submit"><span class="bi-x"></span></button>
            </form>
        </div><!-- End Search Form -->

      </div>

    </div>

  </header><!-- End Header -->

  <main id="main">
	<section>
		<div class="container" >
			<div class="row">
	
				<div class="col-md-12" data-aos="fade-up">

					<section class="section profile">
					  <div class="row">
						<div class="col-xl-4">

							<div class="card">
								<div class="card-body profile-card pt-4 d-flex flex-column align-items-center">

									<img th:src="@{${'photo/'+nguoidung.Hinh_ND}}" style="height:90px;width: 90px;border: thin solid black;" alt="Avatar" class="rounded-circle">
									<h4 th:text="${nguoidung.TEN_NGUOI_DUNG}"></h4>
									<div class="social-links mt-2">
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-eye-fill" viewBox="0 0 16 16">
											<path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
											<path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
										</svg> &nbsp; <th th:text="${tong}"></th>&emsp;
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-emoji-smile-fill" viewBox="0 0 16 16">
											<path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zM4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
										</svg> &nbsp; <th th:text="${like}"></th> &emsp;
										<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="red" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16">
											<path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-2.715 5.933a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z"/>
										</svg> &nbsp; <th th:text="${dislike}"></th>
									</div>
								</div>
							</div>

						</div>

						<div class="col-xl-8">

						  <div class="card">
							<div class="card-body pt-3">
							  <!-- Bordered Tabs -->
							  <ul class="nav nav-tabs nav-tabs-bordered">

								<li class="nav-item">
								  <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile-overview">Overview</button>
								</li>

								<li class="nav-item">
								  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-edit">Edit Profile</button>
								</li>

								<li class="nav-item">
								  <button class="nav-link" data-bs-toggle="tab" data-bs-target="#profile-change-password">Change Password</button>
								</li>

							  </ul>
							  <div class="tab-content pt-2">

								<div class="tab-pane fade show active profile-overview" id="profile-overview">
								  <div class="row">
									<div class="col-lg-3 col-md-4 label ">Tên người dùng</div>
									<div class="col-lg-9 col-md-8" th:text="${nguoidung.TEN_NGUOI_DUNG}"></div>
								  </div>

								  <div class="row">
									<div class="col-lg-3 col-md-4 label">Email</div>
									<div class="col-lg-9 col-md-8" th:text="${nguoidung.email}"></div>
								  </div>
								  <div class="row">
										<div class="col-lg-3 col-md-4 label">Số bài viết</div>
										<div class="col-lg-9 col-md-8" th:text="${nguoidung.dausaches.size()}"></div>
								  </div>

								</div>

								<div class="tab-pane fade profile-edit pt-3" id="profile-edit">

								  <!-- Profile Edit Form -->
								  <form th:action="@{/ttnguoidung/update}" method="post" enctype="multipart/form-data">
                                    <input type="hidden" name="ID_NGUOI_DUNG" th:value="${nguoidung.ID_NGUOI_DUNG}">
                                    <input type="hidden" name="TEN_DANG_NHAP" th:value="${nguoidung.TEN_DANG_NHAP}">
									<div class="row mb-3">
									  <label class="col-md-4 col-lg-3 col-form-label">Profile Image</label>
									  <div class="col-md-8 col-lg-9">
										<img th:src="@{'photo/' +${nguoidung.Hinh_ND}}" style="max-height: 150px;border: thin solid black;" alt="Profile" id="image">
										<div class="pt-2">
										  <input type="file" accept="image/*" name="hinhnguoidung" id="file"
                                                 onchange="choosefile(this)"
                                                 class="btn btn-primary btn-sm" title="Upload new profile image"></a>
										  <!--<a href="#" class="btn btn-danger btn-sm" title="Remove my profile image"><i class="bi bi-trash"></i></a>-->
										</div>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="fullName" class="col-md-4 col-lg-3 col-form-label">Tên người dùng</label>
									  <div class="col-md-8 col-lg-9">
										<input name="TEN_NGUOI_DUNG" type="text" class="form-control" id="fullName" th:value="${nguoidung.TEN_NGUOI_DUNG}" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="Email" class="col-md-4 col-lg-3 col-form-label">Email</label>
									  <div class="col-md-8 col-lg-9">
										<input name="email" type="email" class="form-control" id="Email" th:value="${nguoidung.email}" required>
									  </div>
									</div>

									<div class="text-center">
									  <button type="submit" class="btn btn-primary" style="float:right">Save Changes</button>
									</div>
								  </form><!-- End Profile Edit Form -->

								</div>

								<div class="tab-pane fade pt-3" id="profile-change-password">
								  <!-- Change Password Form -->
								  <form method="post" th:action="@{/ttnguoidung/cnpass}">
                                     <input type="hidden" name="userid" th:value="${nguoidung.ID_NGUOI_DUNG}">
                                     <input type="hidden" name="username" th:value="${nguoidung.TEN_DANG_NHAP}">
									<div class="row mb-3">
									  <label for="currentPassword" class="col-md-4 col-lg-3 col-form-label">Current Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password"  name="cpass" class="form-control" id="currentPassword" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="newPassword" class="col-md-4 col-lg-3 col-form-label">New Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password" name="newpass" class="form-control" id="newPassword" onkeyup="checkPass()" required>
									  </div>
									</div>

									<div class="row mb-3">
									  <label for="renewPassword" class="col-md-4 col-lg-3 col-form-label">Re-enter New Password</label>
									  <div class="col-md-8 col-lg-9">
										<input type="password" name="renewpass" class="form-control" id="renewPassword" onkeyup="checkPass()" required>
                                        <span id="confirmMessage" class="confirmMessage"></span>
									  </div>
									</div>

									<div class="text-center">
									  <button type="submit" class="btn btn-primary" id="btnsubmit" disabled="true" style="float:right">Change Password</button>
									</div>
								  </form><!-- End Change Password Form -->

								</div>

							  </div><!-- End Bordered Tabs -->

							</div>
						  </div>

						</div>
					  </div>
					</section>
								
				</div>
			</div>
		</div>
	</section>
    
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer th:replace="fragments :: footer" >
  </footer>

  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <script>
      function choosefile(fileInput){
          if(fileInput.files && fileInput.files[0]){
              var r = new FileReader();

              r.onload = function(e){
                  $('#image').attr('src',e.target.result);
              }
              r.readAsDataURL(fileInput.files[0]);
          }
      }
  </script>
  <script>
      function checkPass() {
          var crnpass = document.getElementById('currentPassword');
          var password = document.getElementById('newPassword');
          var password2 = document.getElementById('renewPassword');
          var message = document.getElementById('confirmMessage');
          var btn = document.getElementById('btnsubmit');
          colors = {
              goodColor: "#fff",
              goodColored: "#087a08",
              badColor: "#fff",
              badColored:"#ed0b0b"
          },
          strings = {
                  "confirmMessage": ["Mật khẩu đã khớp", "Mật khẩu không khớp"]
          };

          if (password.value === password2.value && (password.value + password2.value) !== "") {
                  password2.style.backgroundColor = colors["goodColor"];
                  message.style.color = colors["goodColored"];
                  message.innerHTML = strings["confirmMessage"][0];
                  btn.disabled = false;
          } else if (!(password2.value === "")) {
                  password2.style.backgroundColor = colors["badColor"];
                  message.style.color = colors["badColored"];
                  message.innerHTML = strings["confirmMessage"][1];
                  btn.disabled = true;
          } else {
                  message.innerHTML = "";
          }


      }
  </script>

</body>

</html>